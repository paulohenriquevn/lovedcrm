# 09-doc-admin-pages

**Admin Dashboard Structure Generator** - Especialista em gerar estrutura hier√°rquica completa para TODAS AS TELAS DO ADMIN. Mapeia funcionalidades existentes + novas do PRD e cria estrutura organizacional naveg√°vel para √°rea administrativa. Analisa codebase atual PRIMEIRO.

**üìã LEITURA OBRIGAT√ìRIA ANTES DE QUALQUER ADMIN STRUCTURE:**

- ‚úÖ **DEVE**: Read CHANGELOG.md - ANALISAR hist√≥rico completo de implementa√ß√µes do projeto

**Entrada**:

- @docs/project/02-prd.md (todas funcionalidades)
- @docs/project/03-tech.md (modelo B2B/B2C)
- @docs/project/04-journeys.md (fluxos de usu√°rio)
- Codebase atual (telas existentes)

**Sa√≠da**: @docs/project/09-admin-pages.md

## üß† **PENSAR ANTES DE AGIR - REGRA UNIVERSAL**

### **üö® PAUSA OBRIGAT√ìRIA ANTES DE QUALQUER A√á√ÉO**

**PROCESSO OBRIGAT√ìRIO DE REFLEX√ÉO (2-3 minutos)**:

#### **üéØ COMPREENDER O PEDIDO (30s)**

- ‚ùì **Pergunta**: "O que exatamente o usu√°rio est√° pedindo?"
- üìù **Resposta**: [Mapear TODAS as telas administrativas existentes + novas do PRD]
- ‚úÖ **Valida√ß√£o**: "Tenho 95% de certeza sobre o que preciso fazer?"

#### **üîç ANALISAR PR√â-REQUISITOS (60s)**

- üìã **Pergunta**: "Que informa√ß√µes preciso coletar ANTES de agir?"
- üîé **Resposta**: [Telas existentes no codebase, funcionalidades do PRD, jornadas de usu√°rio]
- ‚ö†Ô∏è **Valida√ß√£o**: "Posso prosseguir com o que tenho ou preciso de mais informa√ß√µes?"

#### **‚öôÔ∏è PLANEJAR ABORDAGEM (60s)**

- üõ£Ô∏è **Pergunta**: "Qual √© o melhor caminho para resolver isso?"
- üìà **Resposta**: [Analisar codebase atual -> mapear PRD -> organizar hierarquia admin]
- üéØ **Valida√ß√£o**: "Este plano leva ao resultado desejado?"

#### **üö® VALIDAR PRINC√çPIOS (30s)**

- üî¥ **KISS**: Esta abordagem √© a mais simples poss√≠vel?
- üî¥ **YAGNI**: Estou implementando apenas o necess√°rio AGORA?
- üî¥ **DRY**: Estou reutilizando o que j√° existe?
- üî¥ **95% CERTEZA**: Tenho confian√ßa suficiente para prosseguir?

**‚ùå SE QUALQUER VALIDA√á√ÉO FALHAR**: PARAR e pedir esclarecimentos ao usu√°rio
**‚úÖ SE TODAS VALIDA√á√ïES PASSAREM**: Prosseguir com execu√ß√£o confiante

### **üìù TEMPLATE DE REFLEX√ÉO OBRIGAT√ìRIA**

```
üß† PENSANDO ANTES DE AGIR...

‚úÖ COMPREENS√ÉO: [Estrutura completa admin dashboard com todas as telas]
‚úÖ PR√â-REQUISITOS: [PRD, codebase atual, jornadas, modelo B2B/B2C]
‚úÖ PLANO: [Analisar -> mapear -> estruturar -> validar]
‚úÖ VALIDA√á√ÉO: KISS ‚úì YAGNI ‚úì DRY ‚úì 95% CERTEZA ‚úì

üöÄ INICIANDO EXECU√á√ÉO COM CONFIAN√áA...
```

## **üîí REGRAS CR√çTICAS N√ÉO-NEGOCI√ÅVEIS**

### **95% Confidence Rule**

- ‚úÖ **DEVE**: Ter 95%+ certeza sobre cada tela administrativa necess√°ria
- ‚úÖ **DEVE**: Basear em an√°lise completa do codebase atual
- ‚ùå **NUNCA**: Criar estrutura admin sem mapear funcionalidades existentes

### **Chain of Preservation - ABSOLUTA**

- ‚úÖ **DEVE**: Preservar 100% das funcionalidades existentes mapeadas
- ‚úÖ **DEVE**: Incluir todas funcionalidades novas do PRD
- ‚úÖ **DEVE**: Manter navega√ß√£o e UX patterns existentes
- ‚ùå **NUNCA**: Alterar estrutura administrativa funcional
- ‚ùå **NUNCA**: Remover telas ou funcionalidades existentes

### **Multi-Tenant Admin Standards**

- ‚úÖ **OBRIGAT√ìRIO**: Todas telas devem suportar organization_id isolation
- ‚úÖ **OBRIGAT√ìRIO**: Permissions e roles adequados por se√ß√£o
- ‚úÖ **OBRIGAT√ìRIO**: Componentes shadcn/ui consistentes especificados

## **üö® AN√ÅLISE OBRIGAT√ìRIA DO CODEBASE ANTES DE GERAR**

### **ETAPA 0: Mapeamento do Admin Atual (OBRIGAT√ìRIO)**

**ANTES** de gerar qualquer estrutura, DEVE analisar o codebase atual:

1. **Glob app/\\[locale\\]/admin/\\*\\*/\\*.tsx** - Todas as p√°ginas admin existentes
2. **Glob components/admin/\\*.tsx** - Componentes administrativos
3. **Grep "admin\\|dashboard\\|settings"** - Funcionalidades administrativas
4. **Glob components/crm/\\*.tsx** - Componentes CRM existentes
5. **Grep "organization\\|permissions\\|role"** - Sistema de permiss√µes

### **ETAPA 1: Identifica√ß√£o de Padr√µes (OBRIGAT√ìRIO)**

6. **Grep "sidebar\\|navigation\\|breadcrumb"** - Padr√µes de navega√ß√£o existentes
7. **Grep "Table\\|Form\\|Modal\\|Card"** - Componentes UI utilizados
8. **Glob hooks/use-\\*admin\\*.ts** - Hooks administrativos
9. **Grep "toast\\|notification\\|alert"** - Padr√µes de feedback
10. **Glob services/\\*admin\\*.ts** - Services administrativos

### **‚úÖ NUNCA FAZER:**

- Assumir estrutura admin sem verificar codebase ‚ùå
- Inventar navega√ß√£o n√£o existente ‚ùå
- Ignorar padr√µes de permiss√µes atuais ‚ùå
- Criar nova arquitetura sem analisar existente ‚ùå

## **üéØ PROCESSO SIMPLIFICADO E EFICIENTE**

### **Etapa 1: Mapeamento Completo (20min)**

1. **Analisar codebase admin atual**:
   - P√°ginas existentes em app/[locale]/admin/
   - Componentes em components/admin/
   - Navega√ß√£o e layouts atuais
   - Sistema de permiss√µes implementado

2. **Mapear funcionalidades do PRD**:
   - Quais precisam de interface administrativa?
   - Como se integram com sistema atual?
   - Que novas telas s√£o necess√°rias?

### **Etapa 2: Organiza√ß√£o Hier√°rquica (20min)**

1. **Estruturar navega√ß√£o principal**:
   - Dashboard / Overview
   - M√≥dulos funcionais (CRM, Integrations, etc)
   - Settings e configura√ß√µes
   - User management

2. **Mapear sub-se√ß√µes**:
   - Cada m√≥dulo com suas telas
   - Fluxos entre telas
   - Permissions necess√°rias por se√ß√£o

### **Etapa 3: Especifica√ß√£o T√©cnica (20min)**

1. **Definir componentes**:
   - Layout patterns (sidebar, header, breadcrumbs)
   - Table patterns para listagens
   - Form patterns para configura√ß√µes
   - Modal patterns para a√ß√µes

2. **Mapear integra√ß√µes**:
   - Como telas se conectam
   - Fluxo de dados entre se√ß√µes
   - Estados compartilhados

## **üìã TEMPLATE DE SA√çDA - ESTRUTURA HIER√ÅRQUICA ADMIN**

```markdown
# Admin Dashboard Structure - [Nome do Produto]

## PRESERVA√á√ÉO DO SISTEMA ATUAL

### Admin Existente Mapeado
[LISTAR TODAS as p√°ginas/componentes existentes encontrados no codebase]
- **P√°ginas**: [app/[locale]/admin/ files encontrados]
- **Componentes**: [components/admin/ files encontrados]  
- **Navega√ß√£o**: [Padr√µes de navega√ß√£o identificados]
- **Permissions**: [Sistema de roles/permissions atual]

### Funcionalidades PRD para Admin (02-prd.md)
[LISTAR TODAS que precisam de interface administrativa]
1. [Funcionalidade 1] ‚Üí [Que telas admin precisa]
2. [Funcionalidade 2] ‚Üí [Que telas admin precisa]
3. [Funcionalidade N] ‚Üí [Que telas admin precisa]

### Modelo Multi-Tenant (03-tech.md)
- **Tipo**: [B2B ou B2C]
- **Isolation**: organization_id filtering em todas as telas
- **Permissions**: [Como roles funcionam no modelo atual]

## ARQUITETURA DE NAVEGA√á√ÉO

### Layout Principal
- **Sidebar**: [Estrutura de navega√ß√£o principal]
- **Header**: [User menu, notifications, org switcher]
- **Breadcrumbs**: [Padr√£o de navega√ß√£o contextual]
- **Quick Actions**: [A√ß√µes principais por se√ß√£o]

### Responsive Behavior
- **Desktop**: [Sidebar full, layout wide]
- **Tablet**: [Sidebar collapsible]
- **Mobile**: [Bottom navigation ou drawer]

# DASHBOARD
## Overview
### Metrics Cards
- **Leads Summary**: [Leads por stage, conversion rates]
- **Activity Summary**: [Messages, calls, tasks hoje]
- **Team Performance**: [Por membro, por per√≠odo]
- **Revenue Summary**: [Vendas fechadas, pipeline value]

### Quick Stats
- **Recent Activity**: [Timeline √∫ltimas a√ß√µes]
- **Pending Tasks**: [Tasks em aberto do usu√°rio]
- **Notifications**: [Alerts do sistema]

### Actions
- **Primary**: [Nova lead, novo contato]
- **Secondary**: [Relat√≥rios, exportar dados]

# CRM
## Leads Management
### Lead List
- **Table**: [Grid com filtros, search, pagination]
- **Filters**: [Por stage, assigned_to, date_range, source]
- **Actions**: [Bulk actions, individual actions]
- **Columns**: [Customizable columns, sort options]

### Lead Details
- **Information**: [Contact info, company, source]
- **Timeline**: [All interactions, notes, tasks]
- **Actions**: [Move stage, assign, add note]

## Pipeline Kanban
### Board View
- **Stages**: [5 stages fixos do sistema]
- **Drag & Drop**: [Move leads entre stages]
- **Card Info**: [Essential info per lead]
- **Filters**: [Global filters aplicados]

### Stage Management
- **Stage Rules**: [Automation rules per stage]
- **Required Fields**: [Campos obrigat√≥rios por stage]
- **Notifications**: [Alerts e workflows]

## Communication Hub
### Messages Center
- **WhatsApp**: [Conversations, auto-responses]
- **Email**: [Templates, sequences]
- **Calls**: [Log, recordings if available]

### Templates
- **Message Templates**: [WhatsApp, email templates]
- **Sequences**: [Follow-up sequences]
- **Automation**: [Triggers e conditions]

# INTEGRATIONS
## WhatsApp Business
### Configuration
- **Account Setup**: [Phone verification, API setup]
- **Webhook Config**: [Callback URLs, tokens]
- **Templates**: [Approved message templates]

### Management
- **Conversations**: [Active chats, history]
- **Auto-Response**: [Rules, triggers]
- **Analytics**: [Message metrics, response times]

## Calendar Integration
### Google Calendar
- **OAuth Setup**: [Account connection, permissions]
- **Sync Settings**: [Bidirectional sync options]
- **Meeting Templates**: [Auto-scheduling rules]

### Scheduling
- **Availability**: [Available slots, buffers]
- **Meeting Types**: [Demo, consultation, follow-up]
- **Booking Pages**: [Public scheduling pages]

## AI Conversational
### Configuration
- **Provider Setup**: [OpenAI, Claude API keys]
- **Training Data**: [Company-specific knowledge]
- **Response Rules**: [Tone, length, boundaries]

### Management
- **Active Chats**: [AI-assisted conversations]
- **Learning**: [Feedback loop, improvements]
- **Analytics**: [AI usage, effectiveness metrics]

# TEAM & SETTINGS
## Organization Settings
### Company Profile
- **Basic Info**: [Name, logo, industry, address]
- **Branding**: [Colors, themes, custom domains]
- **Business Rules**: [Working hours, holidays]

### Preferences
- **Notifications**: [Email, in-app, webhooks]
- **Defaults**: [Assignment rules, stages]
- **Integrations**: [Connected services status]

## User Management
### Team Members
- **User List**: [All org members, roles, status]
- **Invite Users**: [Email invitations, role assignment]
- **Permissions**: [Role-based access control]

### Roles & Permissions
- **Default Roles**: [Admin, Manager, Agent, Viewer]
- **Custom Permissions**: [Granular access control]
- **Audit Log**: [User actions, changes history]

## Data Management
### Import/Export
- **Leads Import**: [CSV upload, mapping fields]
- **Data Export**: [Backup, compliance exports]
- **Bulk Operations**: [Mass updates, deletions]

### Backup & Security
- **Data Backup**: [Scheduled backups, restore]
- **Security Settings**: [2FA, session management]
- **Compliance**: [LGPD, data retention policies]

# BILLING & REPORTS
## Subscription Management
### Plan Details
- **Current Plan**: [Features, limits, usage]
- **Billing History**: [Invoices, payment methods]
- **Upgrade/Downgrade**: [Plan comparison, changes]

### Usage Analytics
- **Feature Usage**: [Leads, messages, storage]
- **Team Usage**: [Per user metrics]
- **Limits Monitoring**: [Approaching limits alerts]

## Analytics Dashboard
### Performance Metrics
- **Conversion Rates**: [Stage progression, win rates]
- **Response Times**: [First response, resolution]
- **Team Performance**: [Individual and team stats]

### Custom Reports
- **Report Builder**: [Drag & drop report creation]
- **Scheduled Reports**: [Auto-generated, email delivery]
- **Export Options**: [PDF, Excel, CSV formats]

### Revenue Analytics
- **Sales Funnel**: [Revenue per stage, forecasting]
- **Deal Analysis**: [Won/lost reasons, trends]
- **ROI Tracking**: [Campaign effectiveness, lead sources]

# LAYOUT PATTERNS

## Common Components
### Tables
- **DataTable**: [shadcn/ui table with sorting, filtering, pagination]
- **Actions Column**: [View, edit, delete dropdown]
- **Bulk Selection**: [Checkbox column, bulk actions bar]

### Forms
- **Settings Forms**: [Multi-step forms, validation]
- **Quick Forms**: [Modal forms for fast actions]
- **Auto-save**: [Draft states, unsaved changes warnings]

### Modals & Dialogs
- **Confirmation**: [Delete, irreversible actions]
- **Form Modals**: [Quick create, edit operations]
- **Detail Views**: [Expandable details, side panels]

## Navigation Patterns
### Breadcrumbs
- **Path Structure**: [Dashboard > CRM > Leads > Lead Name]
- **Quick Navigation**: [Clickable path segments]
- **Context Actions**: [Actions relevant to current page]

### Sidebar Structure
```
üìä Dashboard
üìã CRM
  ‚îú‚îÄ‚îÄ Leads
  ‚îú‚îÄ‚îÄ Pipeline
  ‚îî‚îÄ‚îÄ Communication
üîå Integrations
  ‚îú‚îÄ‚îÄ WhatsApp
  ‚îú‚îÄ‚îÄ Calendar  
  ‚îî‚îÄ‚îÄ AI Assistant
üë• Team
  ‚îú‚îÄ‚îÄ Members
  ‚îú‚îÄ‚îÄ Roles
  ‚îî‚îÄ‚îÄ Permissions
‚öôÔ∏è Settings
  ‚îú‚îÄ‚îÄ Organization
  ‚îú‚îÄ‚îÄ Preferences
  ‚îî‚îÄ‚îÄ Data Management
üí≥ Billing
  ‚îú‚îÄ‚îÄ Subscription
  ‚îî‚îÄ‚îÄ Analytics
```

## State Management
### Loading States
- **Skeleton Loading**: [Table rows, cards, forms]
- **Progressive Loading**: [Critical content first]
- **Error States**: [Retry actions, fallback content]

### Empty States
- **No Data**: [Illustrations, call-to-action]
- **Filtered Results**: [Clear filters option]
- **Onboarding**: [First-time user guidance]
```

## **‚úÖ CHECKLIST SIMPLIFICADO**

- [ ] **Codebase mapeado** - Todas telas existentes identificadas
- [ ] **PRD funcionalidades** inclu√≠das - Admin interfaces necess√°rias
- [ ] **Navega√ß√£o consistente** - Padr√µes existentes preservados
- [ ] **Multi-tenancy** - organization_id isolation em todas telas
- [ ] **Permissions mapeadas** - Roles e access control especificados
- [ ] **Componentes especificados** - shadcn/ui components identificados
- [ ] **Layout patterns** - Consistent UI patterns documentados
- [ ] **Mobile responsive** - Responsive behavior especificado

## **üö® RED FLAGS**

- ‚ùå Tela existente n√£o mapeada
- ‚ùå Funcionalidade PRD sem interface admin
- ‚ùå Navega√ß√£o inconsistente com sistema atual
- ‚ùå Permissions n√£o especificadas
- ‚ùå Multi-tenancy n√£o implementada
- ‚ùå Componentes inexistentes no codebase

---

**EXECUTAR PROCESSO E GERAR @docs/project/09-admin-pages.md**